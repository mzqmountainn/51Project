C51 COMPILER V9.54   KEY_PLUS                                                              11/06/2023 23:39:26 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE KEY_PLUS
OBJECT MODULE PLACED IN .\Objects\key_plus.obj
COMPILER INVOKED BY: D:\software\keilc51\C51\BIN\C51.EXE key_plus.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\key_plus.lst) OBJECT(.\Objects\key_plus.obj)

line level    source

   1          #include <REGX52.H>
   2          unsigned char key_keyNumber;
   3          /**
   4            * @brief°´¼ü¼ì²â£¬Ö®Ç°ÒªÔÚ°´¼ü°´ÏÂºóÓÃDelayº¯Êı½øĞĞÈí¼şÏû¶¶£¬»¹ÒªÓÃwhile(P3_1==0)À´ÅĞ¶ÏÊÇ·ñËÉÊÖ£¬Èç¹û³¤Æ
             -Ú²»ËÉÊÖ£¬ÔòCPU»á      ¿¨ÔÚ¸ÃËÀÑ­»·Àï£¬²»ÄÜÖ´ĞĞÆäËû´úÂë
   5            * @paramÎŞ
   6            * @retval·µ»Ø±»°´ÏÂ°´¼üµÄÖµ
   7            */
   8          unsigned char Key_GetState()
   9          {
  10   1              unsigned char keynum = 0;
  11   1              if(P3_1==0){keynum=1;}  //Ò»ÓĞ°´¼ü±»°´ÏÂ£¬±êÖ¾Î»keynumÁ¢¼´ÖÃÎ»²¢·µ»Ø£¬¸økey_loopº¯Êı´¦Àí
  12   1              if(P3_0==0){keynum=2;}
  13   1              if(P3_2==0){keynum=3;}
  14   1              if(P3_3==0){keynum=4;}
  15   1              return keynum;
  16   1      }
  17          /**
  18            * @briefÓÃÓÚ·µ»Ø°´¼ü±êÖ¾Î»£¬mainº¯ÊıÖĞµ÷ÓÃ
  19            * @paramÎŞ
  20            * @retval°´¼ü±êÖ¾Î»
  21            */
  22          unsigned char key_return()
  23          {
  24   1              unsigned char temp = 0;
  25   1              temp = key_keyNumber;
  26   1              key_keyNumber = 0;
  27   1              return temp;
  28   1      }
  29          /**
  30            * @briefÃ¿¸ô20ºÁÃëÖ´ĞĞÒ»´Î¸Ãº¯Êı£¬¶Ô°´¼ü×´Ì¬½øĞĞÉ¨Ãè
  31            * @paramÎŞ
  32            * @retvalÎŞ
  33            */
  34          void key_loop()
  35          {
  36   1              static unsigned char before_state,now_state;
  37   1              before_state = now_state;
  38   1              now_state = Key_GetState();             //»ñÈ¡°´¼ü±êÖ¾Î»
  39   1          
  40   1          /*1.Ò»¿ªÊ¼Ã»°´¼ü°´ÏÂÊ±before_state = 0,now_state = 0
  41   1            2.µ±°´¼ü1°´ÏÂÃ»ËÉ¿ªÊ±£¬now_state = 1,´ËÊ±before_state = 0£¬²»Âú×ãÏÂÃæÈÎºÎµÄÅĞ¶Ï
  42   1            3.20msºó¸Ãº¯ÊıÔÙ´Î±»µ÷ÓÃ£¬before_state = now_state = 1
  43   1            4.°´¼ü1ËÉ¿ª£¬now_state = 0£¬´ËÊ±before_state = 1£¬Âú×ãÏÂÃæµÚÒ»ÌõifÅĞ¶Ï£¬key_keyNumberÖÃ1
  44   1          */
  45   1          
  46   1              //ÉÏÒ»¸ö×´Ì¬ÓĞ°´¼ü°´ÏÂ£¬ÏÖÔÚ×´Ì¬Ã»ÓĞ°´¼ü°´ÏÂ£¬ËµÃ÷´¦ÓÚ°´ÏÂºóËÉÊÖ½×¶Î
  47   1          //Èôif(before_state == 0 && now_state == 1)£¬ÔòÊÇ°´¼ü°´ÏÂË²¼äÎªÕæ£¬±êÖ¾Î»ÖÃ1£¬²»ÓÃµÈ        
  48   1              if(before_state == 1 && now_state == 0) 
  49   1              {
  50   2                      key_keyNumber = 1;      //È«¾Ö±äÁ¿key_keyNumberÖÃ1£¬Ê¹ÓÃkey_returnº¯Êı·µ»Ø¸ømainº¯ÊıÊ¹ÓÃ
  51   2              }
  52   1              if(before_state == 2 && now_state == 0) 
  53   1              {
C51 COMPILER V9.54   KEY_PLUS                                                              11/06/2023 23:39:26 PAGE 2   

  54   2                      key_keyNumber = 2;
  55   2              }
  56   1              if(before_state == 3 && now_state == 0) 
  57   1              {
  58   2                      key_keyNumber = 3;
  59   2              }
  60   1              if(before_state == 4 && now_state == 0) 
  61   1              {
  62   2                      key_keyNumber = 4;
  63   2              }
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     85    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
